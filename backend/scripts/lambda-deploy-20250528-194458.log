2025-05-28 19:44:58,518 - INFO - Starting Lambda function deployment...
2025-05-28 19:44:58,519 - INFO - Loading environment variables from C:\Users\mehdi\code\patchline_v1\.env.local
2025-05-28 19:44:58,551 - INFO - Found credentials in environment variables.
2025-05-28 19:44:59,340 - INFO - Using existing role: arn:aws:iam::366218382497:role/PatchlineLambdaExecutionRole
2025-05-28 19:44:59,344 - INFO - Agent ID: C7VZ0QWDSG
2025-05-28 19:44:59,344 - INFO - Alias ID: WDGFWL1YCB
2025-05-28 19:44:59,348 - INFO - Source file: C:\Users\mehdi\code\patchline_v1\backend\lambda\gmail-auth-handler.py
2025-05-28 19:44:59,356 - INFO - Installing dependencies...
2025-05-28 19:45:17,449 - INFO - Added 4167 files to zip
2025-05-28 19:45:17,481 - INFO - Package size: 29.37 MB
2025-05-28 19:45:18,555 - INFO - Handler file: gmail-auth-handler.py
2025-05-28 19:45:18,555 - INFO - Role ARN: arn:aws:iam::366218382497:role/PatchlineLambdaExecutionRole
2025-05-28 19:45:18,555 - INFO - Environment variables: {
  "PLATFORM_CONNECTIONS_TABLE": "PlatformConnections-staging",
  "GMAIL_SECRETS_NAME": "patchline/gmail-oauth",
  "KNOWLEDGE_BASE_BUCKET": "patchline-email-knowledge-base",
  "BEDROCK_AGENT_ID": "C7VZ0QWDSG",
  "BEDROCK_AGENT_ALIAS_ID": "WDGFWL1YCB"
}
2025-05-28 19:45:18,612 - INFO - Function does not exist, will create it
2025-05-28 19:45:18,613 - INFO - Creating new function...
2025-05-28 19:45:27,408 - INFO - Function created: arn:aws:lambda:us-east-1:366218382497:function:gmail-auth-handler
2025-05-28 19:45:27,408 - INFO - Waiting for function to be active...
2025-05-28 19:45:32,792 - INFO - Source file: C:\Users\mehdi\code\patchline_v1\backend\lambda\gmail-action-handler.py
2025-05-28 19:45:32,795 - INFO - Installing dependencies...
2025-05-28 19:45:48,705 - INFO - Added 4167 files to zip
2025-05-28 19:45:48,737 - INFO - Package size: 29.38 MB
2025-05-28 19:45:49,978 - INFO - Handler file: gmail-action-handler.py
2025-05-28 19:45:49,979 - INFO - Role ARN: arn:aws:iam::366218382497:role/PatchlineLambdaExecutionRole
2025-05-28 19:45:49,979 - INFO - Environment variables: {
  "PLATFORM_CONNECTIONS_TABLE": "PlatformConnections-staging",
  "GMAIL_SECRETS_NAME": "patchline/gmail-oauth",
  "KNOWLEDGE_BASE_BUCKET": "patchline-email-knowledge-base",
  "BEDROCK_AGENT_ID": "C7VZ0QWDSG",
  "BEDROCK_AGENT_ALIAS_ID": "WDGFWL1YCB"
}
2025-05-28 19:45:50,038 - INFO - Function does not exist, will create it
2025-05-28 19:45:50,039 - INFO - Creating new function...
2025-05-28 19:45:57,288 - INFO - Function created: arn:aws:lambda:us-east-1:366218382497:function:gmail-action-handler
2025-05-28 19:45:57,290 - INFO - Waiting for function to be active...
2025-05-28 19:46:02,569 - INFO - Found credentials in environment variables.
2025-05-28 19:46:02,905 - INFO - Account ID: 366218382497
2025-05-28 19:46:02,939 - INFO - No existing policy
2025-05-28 19:46:02,940 - INFO - Adding permission: AllowBedrockInvoke
2025-05-28 19:46:03,050 - INFO - Adding permission: AllowBedrockInvokeWildcard
2025-05-28 19:46:03,156 - INFO - Deployed functions:
2025-05-28 19:46:03,156 - INFO -   • gmail-auth-handler: arn:aws:lambda:us-east-1:366218382497:function:gmail-auth-handler
2025-05-28 19:46:03,157 - INFO -   • gmail-action-handler: arn:aws:lambda:us-east-1:366218382497:function:gmail-action-handler
